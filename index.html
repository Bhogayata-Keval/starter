<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Getting Started with Docker - Docker Starter</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Starter</h1>
        <p class="header">Docker Starter for Cloud 66</p>

        <ul>
          <li><a class="buttons github" href="https://github.com/cloud66/starter">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="http://www.cloud66.com">Cloud 66</a></p>


      </header>
      <section>
        <h3>Welcome to Starter</h3>

        <p>Cloud 66 Starter is an open-source command line tool to generate a <code>Dockerfile</code> and a <code>service.yml</code> file from arbitrary source code. The service.yml file is a Cloud 66 service definition file which is used to define the service configurations on a stack.</p>
        <p>Starter works in the same way as <a href="https://devcenter.heroku.com/articles/buildpacks">BuildPacks</a> do, but only generates the above mentioned files; the image compile step happens on the <a href="http://help.cloud66.com/building-your-stack/building-your-docker-service">BuildGrid</a>. Starter does not require any additional third party tools or frameworks to work (it's compiled as a Go executable).</p>

        <h3>Getting Started</h3>
        <p>If you are on OS X, the best way to install starter is using <a href="http://brew.sh/">homebrew</a></p>
        <pre><code>$ brew tap cloud66/tap
$ brew install c66starter</code></pre>
        <p>Alternatively you can <a href="https://github.com/cloud66/c66starter/releases">download the latest release executable</a> and run it on your development machine.</p>
        <pre><code>$ cd /my/project
$ starter</code></pre>
        <p>This will analyze the project in the current folder and generate the two files: <code>Dockerfile</code> and <code>service.yml</code> in the same folder, prompting for information when required.</p>

        <pre><code>Cloud 66 Starter ~ (c) 2015 Cloud 66
Detecting framework for the project at /Users/awesome/work/boom
Found ruby application
Enter ruby version: [latest]
----> Found config/database.yml
Found mysql, confirm? [Y/n]
Found redis, confirm? [Y/n]
Found elasticsearch, confirm? [Y/n]
Add any other databases? [y/N]
----> Analyzing dependencies
----> Parsing Procfile
----> Found Procfile item web
----> Found Procfile item worker
----> Found unicorn
This command will be run after each build: '/bin/sh -c "RAILS_ENV=_env:RAILS_ENV bundle exec rake db:schema:load"', confirm? [Y/n]
This command will be run after each deployment: '/bin/sh -c "RAILS_ENV=_env:RAILS_ENV bundle exec rake db:migrate"', confirm? [Y/n]
----> Writing Dockerfile...
----> Writing service.yml...
Done</code></pre>

        <p>Starter supports <a href="https://devcenter.heroku.com/articles/procfile">Procfiles</a> and generates a service in <code>service.yml</code> for each item in the Procfile. It is highly advised to use a Procfile to define your own service commands as starter will only detect the web service otherwise.</p>
        <p>To use starter on a different folder, you can use the <code>p</code> option:</p>

        <pre><code>$ starter -p /my/project</code></pre>

        <p>For more options, please see:</p>

        <pre><code>$ starter help</code></pre>
        <h3>Supported Languages / Frameworks</h3>

        <ul>
          <li>Ruby, Rack (Rails, Sinatra, Padrino)</li>
          <li>Python (django) (experimental)</li>
        </ul>

        <h3>Deploying your app to your servers</h3>
        <p>Once you have the <code>service.yml</code> and <code>Dockerfile</code> generated you can open them up in your favourite text editor for inspection or modifications.</p>
        <pre><code>$ atom Dockerfile
$ atom service.yml</code></pre>
        <p>If you are happy with the contents you can use them to build and deploy your application on Cloud 66 (you need a <a href="https://app.cloud66.com/users/sign_up">free Cloud 66 account</a> for this).</p>
        <p>Cloud 66 expects your <code>Dockerfile</code> to be with your source code, so we need to commit that with the code into your repositoty.</p>
        <pre><code>$ git add Dockerfile
$ git commit -m "adding Dockerfile"
$ git push origin master</code></pre>
        <p>Now you can use the web interface to <a href="http://help.cloud66.com/introduction-to-cloud-66/introduction-to-cloud-66">create a new stack</a> for your app in Cloud 66. All you need to do is to copy and paste the generated <code>service.yml</code> to the advanced settings of the stack creation step.</p>
        <p>Alternatively you can use <a href="http://help.cloud66.com/toolbelt/toolbelt-introduction">Cloud 66 Toolbelt</a> to create your stack from the command line:</p>
        <pre><code>$ cx stacks create --name "My Awesome Stack" --environment "production" --service_yaml service.yaml</code></pre>
        <p>Find more information on <a href="http://help.cloud66.com/toolbelt/toolbelt-stack-management">creating a stack with the Toolbelt</a>.</p>

        <h3>Contributing &amp; adding support for new frameworks and languages</h3>

        <p>We will be adding support for new languages and frameworks over the time. However, if you find yourself interested in adding one, it's fairly easy to do:</p>
        <ul>
          <li>Get the source code and compile it (it's written in Go!)</li>
          <li>Create a new directory under <code>packs/</code> for you language or framework, e.g <code>packs/java/</code></li>
          <li>You then need to implement two interfaces, <code>packs.Analyzer</code> and <code>packs.Detector</code>.</li>
          <li>The Detector tells starter if the project is written in the given language or framework (in this example Java)</li>
          <li>The Analyzer analyze the project and write the <code>Dockerfile</code> and <code>service.yml</code>.</li>
          <li>Create a template with the name of the language under the <code>templates</code> folder, e.g <code>java.dockerfile.template</code></li>
          <li>Use Golang template syntax to build the template for <code>Dockerfile</code></li>
        </ul>
      </section>
      <footer>
        <p><small><a href="http://www.cloud66.com">Cloud 66</a> is the best way to build and run Docker containers in production</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-25691976-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
